/*!
 * # Semantic UI 2.0.0 - VideoHtml
 * http://github.com/semantic-org/semantic-ui/
 *
 *
 * Copyright 2015 Contributorss
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */
!function(e,n,t,o){"use strict";e.fn.videohtml=function(t){function i(e,n,t){return n<=e.length?e:i(n,t+e,t)}function a(e,n){console.log(e),console.log(n);for(var t=0;t<n.length;t++)if(console.log(n.start(t)),console.log(n.end(t)),e>=n.start(t)&&e<=n.end(t))return!0;return!1}{var r,c=e(this),s=c.selector||"",u=(new Date).getTime(),l=[],m=arguments[0],f="string"==typeof m,p=[].slice.call(arguments,1);n.requestAnimationFrame||n.mozRequestAnimationFrame||n.webkitRequestAnimationFrame||n.msRequestAnimationFrame||function(e){setTimeout(e,0)}}return c.each(function(){var g,d=e.isPlainObject(t)?e.extend(!0,{},e.fn.video.settings,t):e.extend({},e.fn.video.settings),v=(d.selector,d.className,d.error),b=(d.metadata,d.namespace),h=(d.templates,"."+b),y="module-"+b,k=(e(n),e(this)),T=null,w=this,x=k.data(y);g={initialize:function(){g.debug("Initializing videohtml"),g.create(),g.instantiate()},instantiate:function(){g.verbose("Storing instance of module",g),x=g,k.data(y,g)},create:function(){T=w,g.debug("Reefrencing html for videohtml element")},control:{playpause:function(n){n=e(n),n.on("click"+h,function(){w.paused?w.play():w.pause()}),k.on("play"+h,function(){n.addClass("active")}).on("pause"+h,function(){n.removeClass("active")})},playbackrate:function(n,t,o){switch(n=e(n),o){case"push":default:n.on("mousedown"+h,function(){w.playbackRate=t}),n.on("mouseup"+h+" mouseleave"+h,function(){w.playbackRate=w.defaultPlaybackRate});break;case"switch":}k.on("ratechange"+h,function(e){console.log(w.playbackRate)})},timeDisplay:{current:function(e){k.on("timeupdate"+h,function(){var n=new Date(1e3*w.currentTime),t=i(String(n.getHours()-1),1,"0")+":"+i(String(n.getMinutes()),2,"0")+":"+i(String(n.getSeconds()),2,"0");e.text(t)})},remaining:function(e){k.on("timeupdate"+h,function(){var n=new Date(1e3*(w.duration-w.currentTime)),t=i(String(n.getHours()-1),1,"0")+":"+i(String(n.getMinutes()),2,"0")+":"+i(String(n.getSeconds()),2,"0");e.text(t)})}},timeRange:function(n){n=e(n);var t=!0;n.on("change",function(e){var t=n.val()/(n.prop("max")-n.prop("min"));w.fastSeek?w.fastSeek(w.duration*t):w.currentTime=w.duration*t}).on("mousedown"+h,function(){console.log("mousedown"),t=!1}).on("mouseup"+h,function(){t=!0,console.log("mouseup")}),k.on("timeupdate"+h,function(){if(t){var e=w.currentTime/w.duration,o=e*(n.prop("max")-n.prop("min"));n.val(o)}}).on("loadstart"+h+" seeking"+h,function(){a(w.currentTime,w.buffered)||n.prop("disabled",!0)}).on("loadeddata"+h+" seeked"+h,function(){n.prop("disabled",!1)})}},destroy:function(){g.verbose("Destroying previous instance of videohtml"),T=null,g.reset(),k.removeData(y).off(h)},refresh:function(){g.verbose("Refreshing selector cache"),T=w},reset:function(){g.debug("Clearing videohtml"),d.onReset()},setting:function(n,t){if(g.debug("Changing setting",n,t),e.isPlainObject(n))e.extend(!0,d,n);else{if(t===o)return d[n];d[n]=t}},internal:function(n,t){if(e.isPlainObject(n))e.extend(!0,g,n);else{if(t===o)return g[n];g[n]=t}},debug:function(){d.debug&&(d.performance?g.performance.log(arguments):(g.debug=Function.prototype.bind.call(console.info,console,d.name+":"),g.debug.apply(console,arguments)))},verbose:function(){d.verbose&&d.debug&&(d.performance?g.performance.log(arguments):(g.verbose=Function.prototype.bind.call(console.info,console,d.name+":"),g.verbose.apply(console,arguments)))},error:function(){g.error=Function.prototype.bind.call(console.error,console,d.name+":"),g.error.apply(console,arguments)},performance:{log:function(e){var n,t,o;d.performance&&(n=(new Date).getTime(),o=u||n,t=n-o,u=n,l.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:w,"Execution Time":t})),clearTimeout(g.performance.timer),g.performance.timer=setTimeout(g.performance.display,500)},display:function(){var n=d.name+":",t=0;u=!1,clearTimeout(g.performance.timer),e.each(l,function(e,n){t+=n["Execution Time"]}),n+=" "+t+"ms",s&&(n+=" '"+s+"'"),c.length>1&&(n+=" ("+c.length+")"),(console.group!==o||console.table!==o)&&l.length>0&&(console.groupCollapsed(n),console.table?console.table(l):e.each(l,function(e,n){console.log(n.Name+": "+n["Execution Time"]+"ms")}),console.groupEnd()),l=[]}},invoke:function(n,t,i){var a,c,s,u=x;return t=t||p,i=w||i,"string"==typeof n&&u!==o&&(n=n.split(/[\. ]/),a=n.length-1,e.each(n,function(t,i){var r=t!=a?i+n[t+1].charAt(0).toUpperCase()+n[t+1].slice(1):n;if(e.isPlainObject(u[r])&&t!=a)u=u[r];else{if(u[r]!==o)return c=u[r],!1;if(!e.isPlainObject(u[i])||t==a)return u[i]!==o?(c=u[i],!1):(g.error(v.method,n),!1);u=u[i]}})),e.isFunction(c)?s=c.apply(i,t):c!==o&&(s=c),e.isArray(r)?r.push(s):r!==o?r=[r,s]:s!==o&&(r=s),c}},f?(x===o&&g.initialize(),g.invoke(m)):(x!==o&&x.invoke("destroy"),g.initialize())}),r!==o?r:this},e.fn.videohtml.settings={name:"HtmlVideo",namespace:"htmlvideo",debug:!0,verbose:!0,performance:!0,className:{active:"active"},selector:{playButton:".play"}}}(jQuery,window,document);